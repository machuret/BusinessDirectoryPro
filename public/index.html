<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Business Directory Pro</title>
    <script type="module" crossorigin src="/assets/index.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index.css">
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      import React from 'https://esm.sh/react@18.3.1';
      import ReactDOM from 'https://esm.sh/react-dom@18.3.1/client';
      
      const App = () => {
        const [businesses, setBusinesses] = React.useState([]);
        const [loading, setLoading] = React.useState(true);
        
        React.useEffect(() => {
          fetch('/api/businesses')
            .then(res => res.json())
            .then(data => {
              setBusinesses(data.businesses || []);
              setLoading(false);
            })
            .catch(err => {
              console.error('Error:', err);
              setLoading(false);
            });
        }, []);
        
        return React.createElement('div', {
          style: { 
            padding: '20px', 
            fontFamily: 'Arial, sans-serif',
            maxWidth: '1200px',
            margin: '0 auto'
          }
        }, [
          React.createElement('h1', { key: 'title' }, 'Business Directory Pro'),
          React.createElement('p', { key: 'subtitle' }, 'Find and connect with local businesses'),
          
          loading ? 
            React.createElement('p', { key: 'loading' }, 'Loading businesses...') :
            React.createElement('div', { key: 'businesses' }, [
              React.createElement('h2', { key: 'businesses-title' }, `${businesses.length} Businesses Found`),
              React.createElement('div', {
                key: 'business-grid',
                style: {
                  display: 'grid',
                  gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',
                  gap: '20px',
                  marginTop: '20px'
                }
              }, businesses.map(business => 
                React.createElement('div', {
                  key: business.placeid,
                  style: {
                    border: '1px solid #ddd',
                    borderRadius: '8px',
                    padding: '16px',
                    backgroundColor: '#f9f9f9'
                  }
                }, [
                  React.createElement('h3', { 
                    key: 'name',
                    style: { margin: '0 0 8px 0', color: '#333' }
                  }, business.title || 'Business Name'),
                  React.createElement('p', { 
                    key: 'category',
                    style: { margin: '0 0 8px 0', color: '#666', fontSize: '14px' }
                  }, business.categoryname || 'Category'),
                  React.createElement('p', { 
                    key: 'location',
                    style: { margin: '0 0 8px 0', color: '#666', fontSize: '14px' }
                  }, `${business.city || ''}, ${business.state || ''}`),
                  business.phone && React.createElement('p', { 
                    key: 'phone',
                    style: { margin: '0 0 8px 0', color: '#666', fontSize: '14px' }
                  }, business.phone),
                  business.website && React.createElement('a', { 
                    key: 'website',
                    href: business.website,
                    target: '_blank',
                    rel: 'noopener noreferrer',
                    style: { color: '#007bff', textDecoration: 'none' }
                  }, 'Visit Website')
                ])
              ))
            ])
        ]);
      };
      
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(React.createElement(App));
    </script>
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: #ffffff;
        color: #333;
        line-height: 1.6;
      }
      
      h1 {
        color: #2c3e50;
        text-align: center;
        margin-bottom: 10px;
      }
      
      h2 {
        color: #34495e;
        border-bottom: 2px solid #3498db;
        padding-bottom: 5px;
      }
      
      a:hover {
        text-decoration: underline !important;
      }
    </style>
  </body>
</html>